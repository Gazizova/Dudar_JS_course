<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <meta http-equiv="X-UA-Compatible" content="ie=edge" />
    <title>Base Numbers</title>
  </head>
  <body>
    <!--scripts-->
    <script>
      // 7.1 Типы данных: [[Class]], instanceof и утки
      /*
      Задача
      Напишите функцию formatDate(date), которая возвращает дату в формате dd.mm.yy.
      Ее первый аргумент должен содержать дату в одном из видов:
      -Как объект Date.
      -Как строку, например yyyy-mm-dd или другую в стандартном формате даты.
      -Как число секунд с 01.01.1970.
      -Как массив [гггг, мм, дд], месяц начинается с нуля
      */

      let newdate = new Date();
      let newstring = 'Jun 8, 2005';
      let newnumb = 987987987;
      let newarr = [2019, 00, 01];

      document.write(formatDate(newdate) + '<br>');
      document.write(formatDate(newstring) + '<br>');
      document.write(formatDate(newnumb) + '<br>');
      document.write(formatDate(newarr) + '<br>');

      function formatDate(date) {
        // debugger;
        let newdata;

        function returnDateFormat(innerdate) {
          let year = innerdate.getFullYear();
          let blya = '' + year;
          return innerdate.getDate() + '.' + innerdate.getMonth() + '.' + blya.slice(2);
        }

        if (date.getDate) {
          newdata = returnDateFormat(date);
        }
        if (typeof date === 'string') {
          dateparse = new Date(Date.parse(date));
          newdata = returnDateFormat(dateparse);
        }
        if (typeof date === 'number') {
          let num = new Date();
          num.setMilliseconds(date);
          newdata = returnDateFormat(num);
        }
        if (Array.isArray(date)) {
          newdata = 'array';
        }
        return newdata;
      }

      const a = 1 / 0;
      const b = 0 / 0;
      const c = 3;
      console.group('Number Operation');
      console.log('1 / 0 = ' + a);
      console.log('0 / 0 = ' + b);
      console.log(isNaN('1'));
      console.groupEnd();

      function alertFunc(message) {
        alert('start timeout! ' + message);
      }

      tryFunc = () => {
        try {
          const timer = setTimeout(f, 2000);
        } catch (e) {
          alert('catch');
        } finally {
          alert('finally');
        }
      };

      promFunc = () => {
        let promise = new Promise((resolve, reject) => setTimeout(() => resolve('Success'), 1500));

        promise
          .then(resolve => f(resolve))
          .then(() => {
            alert('finally promFunc');
          });
      };

      // promFunc();

      // clearTimeout(f);

      // Напишите функцию printNumbersInterval(), которая последовательно выводит в консоль числа от 1 до 20, с интервалом между числами 100 мс.

      function printNumbersInterval() {
        let i = 1;

        const timerInterval = setInterval(() => {
          console.log(i), i++;
        }, 100);

        setTimeout(() => clearInterval(timerInterval), 2000);
      }

      // printNumbersInterval();

      // Сделайте то же самое, что в задаче Вывод чисел каждые 100 мс, но с использованием рекурсивного setTimeout вместо setInterval

      function debounce(f, ms) {
        let timer = null;

        return function(...args) {
          const onComplete = () => {
            f.apply(this, args);
            timer = null;
          };

          if (timer) {
            clearTimeout(timer);
          }

          timer = setTimeout(onComplete, ms);
        };
      }

      let p = debounce(alertFunc, 1000);
      // p(132);
      // p(333);
    </script>
  </body>
</html>
